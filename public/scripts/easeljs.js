/*
* EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
(function(i){var c=function(){throw"UID cannot be instantiated";};c._nextID=0;c.get=function(){return c._nextID++};i.UID=c})(window);(function(i){var c=function(){throw"Ticker cannot be instantiated.";};c.useRAF=null;c.animationTarget=null;c._listeners=null;c._pauseable=null;c._paused=false;c._inited=false;c._startTime=0;c._pausedTime=0;c._ticks=0;c._pausedTickers=0;c._interval=50;c._lastTime=0;c._times=null;c._tickTimes=null;c._rafActive=false;c._timeoutID=null;c.addListener=function(a,b){a!=null&&(c._inited||c.init(),c.removeListener(a),c._pauseable[c._listeners.length]=b==null?true:b,c._listeners.push(a))};c.init=function(){c._inited=
true;c._times=[];c._tickTimes=[];c._pauseable=[];c._listeners=[];c._times.push(c._lastTime=c._startTime=c._getTime());c.setInterval(c._interval)};c.removeListener=function(a){c._listeners!=null&&(a=c._listeners.indexOf(a),a!=-1&&(c._listeners.splice(a,1),c._pauseable.splice(a,1)))};c.removeAllListeners=function(){c._listeners=[];c._pauseable=[]};c.setInterval=function(a){c._interval=a;c._inited&&c._setupTick()};c.getInterval=function(){return c._interval};c.setFPS=function(a){c.setInterval(1E3/a)};
c.getFPS=function(){return 1E3/c._interval};c.getMeasuredFPS=function(a){if(c._times.length<2)return-1;a==null&&(a=c.getFPS()|0);a=Math.min(c._times.length-1,a);return 1E3/((c._times[0]-c._times[a])/a)};c.setPaused=function(a){c._paused=a};c.getPaused=function(){return c._paused};c.getTime=function(a){return c._getTime()-c._startTime-(a?c._pausedTime:0)};c.getTicks=function(a){return c._ticks-(a?c._pausedTickers:0)};c._handleAF=function(a){c._rafActive=false;c._setupTick();a-c._lastTime>=c._interval-
1&&c._tick()};c._handleTimeout=function(){c.timeoutID=null;c._setupTick();c._tick()};c._setupTick=function(){if(!(c._rafActive||c.timeoutID!=null)){if(c.useRAF){var a=i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.oRequestAnimationFrame||i.msRequestAnimationFrame;if(a){a(c._handleAF,c.animationTarget);c._rafActive=true;return}}c.timeoutID=setTimeout(c._handleTimeout,c._interval)}};c._tick=function(){c._ticks++;var a=c._getTime(),b=a-c._lastTime,m=c._paused;m&&
(c._pausedTickers++,c._pausedTime+=b);c._lastTime=a;for(var h=c._pauseable,e=c._listeners.slice(),d=e?e.length:0,f=0;f<d;f++){var g=e[f];g==null||m&&h[f]||(g.tick?g.tick(b,m):g instanceof Function&&g(b,m))}for(c._tickTimes.unshift(c._getTime()-a);c._tickTimes.length>100;)c._tickTimes.pop();for(c._times.unshift(a);c._times.length>100;)c._times.pop()};c._getTime=function(){return(new Date).getTime()};i.Ticker=c})(window);(function(i){var c=function(b,m,a,c,d){this.initialize(b,m,a,c,d)},a=c.prototype;a.stageX=0;a.stageY=0;a.type=null;a.nativeEvent=null;a.onMouseMove=null;a.onMouseUp=null;a.target=null;a.pointerID=0;a.primary=false;a.initialize=function(b,m,a,c,d,f,g){this.type=b;this.stageX=m;this.stageY=a;this.target=c;this.nativeEvent=d;this.pointerID=f;this.primary=g};a.clone=function(){return new c(this.type,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary)};a.toString=function(){return"[MouseEvent (type="+
this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"};i.MouseEvent=c})(window);(function(i){var c=function(b,m,a,c,d,f){this.initialize(b,m,a,c,d,f)},a=c.prototype;c.identity=null;c.DEG_TO_RAD=Math.PI/180;a.a=1;a.b=0;a.c=0;a.d=1;a.tx=0;a.ty=0;a.alpha=1;a.shadow=null;a.compositeOperation=null;a.initialize=function(b,m,a,c,d,f){if(b!=null)this.a=b;this.b=m||0;this.c=a||0;if(c!=null)this.d=c;this.tx=d||0;this.ty=f||0;return this};a.prepend=function(b,m,a,c,d,f){var g=this.tx;if(b!=1||m!=0||a!=0||c!=1){var l=this.a,k=this.c;this.a=l*b+this.b*a;this.b=l*m+this.b*c;this.c=k*b+this.d*
a;this.d=k*m+this.d*c}this.tx=g*b+this.ty*a+d;this.ty=g*m+this.ty*c+f;return this};a.append=function(b,m,a,c,d,f){var g=this.a,l=this.b,k=this.c,j=this.d;this.a=b*g+m*k;this.b=b*l+m*j;this.c=a*g+c*k;this.d=a*l+c*j;this.tx=d*g+f*k+this.tx;this.ty=d*l+f*j+this.ty;return this};a.prependMatrix=function(b){this.prepend(b.a,b.b,b.c,b.d,b.tx,b.ty);this.prependProperties(b.alpha,b.shadow,b.compositeOperation);return this};a.appendMatrix=function(b){this.append(b.a,b.b,b.c,b.d,b.tx,b.ty);this.appendProperties(b.alpha,
b.shadow,b.compositeOperation);return this};a.prependTransform=function(b,m,a,e,d,f,g,l,k){if(d%360)var j=d*c.DEG_TO_RAD,d=Math.cos(j),j=Math.sin(j);else d=1,j=0;if(l||k)this.tx-=l,this.ty-=k;f||g?(f*=c.DEG_TO_RAD,g*=c.DEG_TO_RAD,this.prepend(d*a,j*a,-j*e,d*e,0,0),this.prepend(Math.cos(g),Math.sin(g),-Math.sin(f),Math.cos(f),b,m)):this.prepend(d*a,j*a,-j*e,d*e,b,m);return this};a.appendTransform=function(b,a,h,e,d,f,g,l,k){if(d%360)var j=d*c.DEG_TO_RAD,d=Math.cos(j),j=Math.sin(j);else d=1,j=0;f||
g?(f*=c.DEG_TO_RAD,g*=c.DEG_TO_RAD,this.append(Math.cos(g),Math.sin(g),-Math.sin(f),Math.cos(f),b,a),this.append(d*h,j*h,-j*e,d*e,0,0)):this.append(d*h,j*h,-j*e,d*e,b,a);if(l||k)this.tx-=l*this.a+k*this.c,this.ty-=l*this.b+k*this.d;return this};a.rotate=function(b){var a=Math.cos(b),b=Math.sin(b),h=this.a,c=this.c,d=this.tx;this.a=h*a-this.b*b;this.b=h*b+this.b*a;this.c=c*a-this.d*b;this.d=c*b+this.d*a;this.tx=d*a-this.ty*b;this.ty=d*b+this.ty*a;return this};a.skew=function(b,a){b*=c.DEG_TO_RAD;a*=
c.DEG_TO_RAD;this.append(Math.cos(a),Math.sin(a),-Math.sin(b),Math.cos(b),0,0);return this};a.scale=function(b,a){this.a*=b;this.d*=a;this.tx*=b;this.ty*=a;return this};a.translate=function(b,a){this.tx+=b;this.ty+=a;return this};a.identity=function(){this.alpha=this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;this.shadow=this.compositeOperation=null;return this};a.invert=function(){var b=this.a,a=this.b,h=this.c,c=this.d,d=this.tx,f=b*c-a*h;this.a=c/f;this.b=-a/f;this.c=-h/f;this.d=b/f;this.tx=(h*
this.ty-c*d)/f;this.ty=-(b*this.ty-a*d)/f;return this};a.isIdentity=function(){return this.tx==0&&this.ty==0&&this.a==1&&this.b==0&&this.c==0&&this.d==1};a.decompose=function(b){b==null&&(b={});b.x=this.tx;b.y=this.ty;b.scaleX=Math.sqrt(this.a*this.a+this.b*this.b);b.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var a=Math.atan2(-this.c,this.d),h=Math.atan2(this.b,this.a);a==h?(b.rotation=h/c.DEG_TO_RAD,this.a<0&&this.d>=0&&(b.rotation+=b.rotation<=0?180:-180),b.skewX=b.skewY=0):(b.skewX=a/c.DEG_TO_RAD,
b.skewY=h/c.DEG_TO_RAD);return b};a.reinitialize=function(b,a,h,c,d,f,g,l,k){this.initialize(b,a,h,c,d,f);this.alpha=g||1;this.shadow=l;this.compositeOperation=k;return this};a.appendProperties=function(b,a,h){this.alpha*=b;this.shadow=a||this.shadow;this.compositeOperation=h||this.compositeOperation;return this};a.prependProperties=function(b,a,h){this.alpha*=b;this.shadow=this.shadow||a;this.compositeOperation=this.compositeOperation||h;return this};a.clone=function(){var b=new c(this.a,this.b,
this.c,this.d,this.tx,this.ty);b.shadow=this.shadow;b.alpha=this.alpha;b.compositeOperation=this.compositeOperation;return b};a.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"};c.identity=new c(1,0,0,1,0,0);i.Matrix2D=c})(window);(function(i){var c=function(b,a){this.initialize(b,a)},a=c.prototype;a.x=0;a.y=0;a.initialize=function(b,a){this.x=b==null?0:b;this.y=a==null?0:a};a.clone=function(){return new c(this.x,this.y)};a.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};i.Point=c})(window);(function(i){var c=function(b,a,h,c){this.initialize(b,a,h,c)},a=c.prototype;a.x=0;a.y=0;a.width=0;a.height=0;a.initialize=function(b,a,h,c){this.x=b==null?0:b;this.y=a==null?0:a;this.width=h==null?0:h;this.height=c==null?0:c};a.clone=function(){return new c(this.x,this.y,this.width,this.height)};a.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"};i.Rectangle=c})(window);(function(i){var c=function(b,a,h,c){this.initialize(b,a,h,c)},a=c.prototype;c.identity=null;a.color=null;a.offsetX=0;a.offsetY=0;a.blur=0;a.initialize=function(b,a,h,c){this.color=b;this.offsetX=a;this.offsetY=h;this.blur=c};a.toString=function(){return"[Shadow]"};a.clone=function(){return new c(this.color,this.offsetX,this.offsetY,this.blur)};c.identity=new c("transparent",0,0,0);i.Shadow=c})(window);(function(i){var c=function(b){this.initialize(b)},a=c.prototype;a.complete=true;a.onComplete=null;a._animations=null;a._frames=null;a._images=null;a._data=null;a._loadCount=0;a._frameHeight=0;a._frameWidth=0;a._numFrames=0;a._regX=0;a._regY=0;a.initialize=function(b){var a,h,c;if(b!=null){if(b.images&&(h=b.images.length)>0){c=this._images=[];for(a=0;a<h;a++){var d=b.images[a];if(typeof d=="string"){var f=d,d=new Image;d.src=f}c.push(d);if(!d.getContext&&!d.complete)this._loadCount++,this.complete=
false,function(b){d.onload=function(){b._handleImageLoad()}}(this)}}if(b.frames!=null)if(b.frames instanceof Array){this._frames=[];c=b.frames;for(a=0,h=c.length;a<h;a++)f=c[a],this._frames.push({image:this._images[f[4]?f[4]:0],rect:new Rectangle(f[0],f[1],f[2],f[3]),regX:f[5]||0,regY:f[6]||0})}else h=b.frames,this._frameWidth=h.width,this._frameHeight=h.height,this._regX=h.regX||0,this._regY=h.regY||0,this._numFrames=h.count,this._loadCount==0&&this._calculateFrames();if((h=b.animations)!=null){this._animations=
[];this._data={};for(var g in h){b={name:g};f=h[g];if(isNaN(f))if(f instanceof Array){b.frequency=f[3];b.next=f[2];c=b.frames=[];for(a=f[0];a<=f[1];a++)c.push(a)}else b.frequency=f.frequency,b.next=f.next,a=f.frames,c=b.frames=!isNaN(a)?[a]:a.slice(0);else c=b.frames=[f];b.next=c.length<2||b.next==false?null:b.next==null||b.next==true?g:b.next;if(!b.frequency)b.frequency=1;this._animations.push(g);this._data[g]=b}}}};a.getNumFrames=function(b){return b==null?this._frames?this._frames.length:this._numFrames:
(b=this._data[b],b==null?0:b.frames.length)};a.getAnimations=function(){return this._animations.slice(0)};a.getAnimation=function(b){return this._data[b]};a.getFrame=function(b){return this.complete&&this._frames&&(frame=this._frames[b])?frame:null};a.toString=function(){return"[SpriteSheet]"};a.clone=function(){var b=new c;b.complete=this.complete;b._animations=this._animations;b._frames=this._frames;b._images=this._images;b._data=this._data;b._frameHeight=this._frameHeight;b._frameWidth=this._frameWidth;
b._numFrames=this._numFrames;b._loadCount=this._loadCount;return b};a._handleImageLoad=function(){if(--this._loadCount==0)this._calculateFrames(),this.complete=true,this.onComplete&&this.onComplete()};a._calculateFrames=function(){if(!(this._frames||this._frameWidth==0)){this._frames=[];for(var b=0,a=this._frameWidth,c=this._frameHeight,e=0,d=this._images;e<d.length;e++){for(var f=d[e],g=(f.width+1)/a|0,l=(f.height+1)/c|0,l=this._numFrames>0?Math.min(this._numFrames-b,g*l):g*l,k=0;k<l;k++)this._frames.push({image:f,
rect:new Rectangle(k%g*a,(k/g|0)*c,a,c),regX:this._regX,regY:this._regY});b+=l}this._numFrames=b}};i.SpriteSheet=c})(window);(function(i){function c(b,a,c){this.f=b;this.params=a;this.path=c==null?true:c}c.prototype.exec=function(b){this.f.apply(b,this.params)};var a=function(){this.initialize()},b=a.prototype;a.getRGB=function(b,a,c,d){b!=null&&c==null&&(d=a,c=b&255,a=b>>8&255,b=b>>16&255);return d==null?"rgb("+b+","+a+","+c+")":"rgba("+b+","+a+","+c+","+d+")"};a.getHSL=function(b,a,c,d){return d==null?"hsl("+b%360+","+a+"%,"+c+"%)":"hsla("+b%360+","+a+"%,"+c+"%,"+d+")"};a.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,
J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63};a.STROKE_CAPS_MAP=["butt","round","square"];a.STROKE_JOINTS_MAP=["miter","round","bevel"];a._ctx=document.createElement("canvas").getContext("2d");a.beginCmd=new c(a._ctx.beginPath,[],false);a.fillCmd=new c(a._ctx.fill,[],
false);a.strokeCmd=new c(a._ctx.stroke,[],false);b._strokeInstructions=null;b._strokeStyleInstructions=null;b._fillInstructions=null;b._instructions=null;b._oldInstructions=null;b._activeInstructions=null;b._active=false;b._dirty=false;b.initialize=function(){this.clear();this._ctx=a._ctx};b.draw=function(b){this._dirty&&this._updateInstructions();for(var a=this._instructions,c=0,d=a.length;c<d;c++)a[c].exec(b)};b.drawAsPath=function(b){this._dirty&&this._updateInstructions();for(var a,c=this._instructions,
d=0,f=c.length;d<f;d++)((a=c[d]).path||d==0)&&a.exec(b)};b.moveTo=function(b,a){this._activeInstructions.push(new c(this._ctx.moveTo,[b,a]));return this};b.lineTo=function(b,a){this._dirty=this._active=true;this._activeInstructions.push(new c(this._ctx.lineTo,[b,a]));return this};b.arcTo=function(b,a,e,d,f){this._dirty=this._active=true;this._activeInstructions.push(new c(this._ctx.arcTo,[b,a,e,d,f]));return this};b.arc=function(b,a,e,d,f,g){this._dirty=this._active=true;g==null&&(g=false);this._activeInstructions.push(new c(this._ctx.arc,
[b,a,e,d,f,g]));return this};b.quadraticCurveTo=function(b,a,e,d){this._dirty=this._active=true;this._activeInstructions.push(new c(this._ctx.quadraticCurveTo,[b,a,e,d]));return this};b.bezierCurveTo=function(b,a,e,d,f,g){this._dirty=this._active=true;this._activeInstructions.push(new c(this._ctx.bezierCurveTo,[b,a,e,d,f,g]));return this};b.rect=function(b,a,e,d){this._dirty=this._active=true;this._activeInstructions.push(new c(this._ctx.rect,[b,a,e,d]));return this};b.closePath=function(){if(this._active)this._dirty=
true,this._activeInstructions.push(new c(this._ctx.closePath,[]));return this};b.clear=function(){this._instructions=[];this._oldInstructions=[];this._activeInstructions=[];this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null;this._active=this._dirty=false;return this};b.beginFill=function(b){this._active&&this._newPath();this._fillInstructions=b?[new c(this._setProp,["fillStyle",b],false)]:null;return this};b.beginLinearGradientFill=function(b,a,e,d,f,g){this._active&&
this._newPath();e=this._ctx.createLinearGradient(e,d,f,g);d=0;for(f=b.length;d<f;d++)e.addColorStop(a[d],b[d]);this._fillInstructions=[new c(this._setProp,["fillStyle",e],false)];return this};b.beginRadialGradientFill=function(b,a,e,d,f,g,l,k){this._active&&this._newPath();e=this._ctx.createRadialGradient(e,d,f,g,l,k);d=0;for(f=b.length;d<f;d++)e.addColorStop(a[d],b[d]);this._fillInstructions=[new c(this._setProp,["fillStyle",e],false)];return this};b.beginBitmapFill=function(b,a){this._active&&this._newPath();
var e=this._ctx.createPattern(b,a||"");this._fillInstructions=[new c(this._setProp,["fillStyle",e],false)];return this};b.endFill=function(){return this.beginFill()};b.setStrokeStyle=function(b,h,e,d){this._active&&this._newPath();this._strokeStyleInstructions=[new c(this._setProp,["lineWidth",b==null?"1":b],false),new c(this._setProp,["lineCap",h==null?"butt":isNaN(h)?h:a.STROKE_CAPS_MAP[h]],false),new c(this._setProp,["lineJoin",e==null?"miter":isNaN(e)?e:a.STROKE_JOINTS_MAP[e]],false),new c(this._setProp,
["miterLimit",d==null?"10":d],false)];return this};b.beginStroke=function(b){this._active&&this._newPath();this._strokeInstructions=b?[new c(this._setProp,["strokeStyle",b],false)]:null;return this};b.beginLinearGradientStroke=function(b,a,e,d,f,g){this._active&&this._newPath();e=this._ctx.createLinearGradient(e,d,f,g);d=0;for(f=b.length;d<f;d++)e.addColorStop(a[d],b[d]);this._strokeInstructions=[new c(this._setProp,["strokeStyle",e],false)];return this};b.beginRadialGradientStroke=function(b,a,e,
d,f,g,l,k){this._active&&this._newPath();e=this._ctx.createRadialGradient(e,d,f,g,l,k);d=0;for(f=b.length;d<f;d++)e.addColorStop(a[d],b[d]);this._strokeInstructions=[new c(this._setProp,["strokeStyle",e],false)];return this};b.beginBitmapStroke=function(b,a){this._active&&this._newPath();var e=this._ctx.createPattern(b,a||"");this._strokeInstructions=[new c(this._setProp,["strokeStyle",e],false)];return this};b.endStroke=function(){this.beginStroke();return this};b.curveTo=b.quadraticCurveTo;b.drawRect=
b.rect;b.drawRoundRect=function(b,a,c,d,f){this.drawRoundRectComplex(b,a,c,d,f,f,f,f);return this};b.drawRoundRectComplex=function(b,a,e,d,f,g,l,k){this._dirty=this._active=true;var j=Math.PI,i=this._ctx.arc,n=this._ctx.lineTo;this._activeInstructions.push(new c(this._ctx.moveTo,[b+f,a]),new c(n,[b+e-g,a]),g>=0?new c(i,[b+e-g,a+g,g,-j/2,0]):new c(i,[b+e,a,-g,j,j/2,true]),new c(n,[b+e,a+d-l]),k>=0?new c(i,[b+e-l,a+d-l,l,0,j/2]):new c(i,[b+e,a+d,-l,-j/2,j,true]),new c(n,[b+k,a+d]),k>=0?new c(i,[b+k,
a+d-k,k,j/2,j]):new c(i,[b,a+d,-k,0,-j/2,true]),new c(n,[b,a+f]),f>=0?new c(i,[b+f,a+f,f,j,-j/2]):new c(i,[b,a,-f,j/2,0,true]));return this};b.drawCircle=function(b,a,c){this.arc(b,a,c,0,Math.PI*2);return this};b.drawEllipse=function(b,a,e,d){this._dirty=this._active=true;var f=e/2*0.5522848,g=d/2*0.5522848,l=b+e,k=a+d,e=b+e/2,d=a+d/2;this._activeInstructions.push(new c(this._ctx.moveTo,[b,d]),new c(this._ctx.bezierCurveTo,[b,d-g,e-f,a,e,a]),new c(this._ctx.bezierCurveTo,[e+f,a,l,d-g,l,d]),new c(this._ctx.bezierCurveTo,
[l,d+g,e+f,k,e,k]),new c(this._ctx.bezierCurveTo,[e-f,k,b,d+g,b,d]));return this};b.drawPolyStar=function(b,a,e,d,f,g){this._dirty=this._active=true;f==null&&(f=0);f=1-f;g==null?g=0:g/=180/Math.PI;var l=Math.PI/d;this._activeInstructions.push(new c(this._ctx.moveTo,[b+Math.cos(g)*e,a+Math.sin(g)*e]));for(var k=0;k<d;k++)g+=l,f!=1&&this._activeInstructions.push(new c(this._ctx.lineTo,[b+Math.cos(g)*e*f,a+Math.sin(g)*e*f])),g+=l,this._activeInstructions.push(new c(this._ctx.lineTo,[b+Math.cos(g)*e,
a+Math.sin(g)*e]));return this};b.decodePath=function(b){for(var c=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo],e=[2,2,4,6],d=0,f=b.length,g=[],l=0,k=0,j=a.BASE_64;d<f;){var i=j[b.charAt(d)],n=i>>3,r=c[n];if(!r||i&3)throw"bad path data";var s=e[n];n||(l=k=0);g.length=0;d++;i=(i>>2&1)+2;for(n=0;n<s;n++){var p=j[b.charAt(d)],q=p>>5?-1:1,p=(p&31)<<6|j[b.charAt(d+1)];i==3&&(p=p<<6|j[b.charAt(d+2)]);p=q*p/10;n%2?l=p+=l:k=p+=k;g[n]=p;d+=i}r.apply(this,g)}return this};b.clone=function(){var b=
new a;b._instructions=this._instructions.slice();b._activeInstructions=this._activeInstructions.slice();b._oldInstructions=this._oldInstructions.slice();if(this._fillInstructions)b._fillInstructions=this._fillInstructions.slice();if(this._strokeInstructions)b._strokeInstructions=this._strokeInstructions.slice();if(this._strokeStyleInstructions)b._strokeStyleInstructions=this._strokeStyleInstructions.slice();b._active=this._active;b._dirty=this._dirty;b.drawAsPath=this.drawAsPath;return b};b.toString=
function(){return"[Graphics]"};b.mt=b.moveTo;b.lt=b.lineTo;b.at=b.arcTo;b.bt=b.bezierCurveTo;b.qt=b.quadraticCurveTo;b.a=b.arc;b.r=b.rect;b.cp=b.closePath;b.c=b.clear;b.f=b.beginFill;b.lf=b.beginLinearGradientFill;b.rf=b.beginRadialGradientFill;b.bf=b.beginBitmapFill;b.ef=b.endFill;b.ss=b.setStrokeStyle;b.s=b.beginStroke;b.ls=b.beginLinearGradientStroke;b.rs=b.beginRadialGradientStroke;b.bs=b.beginBitmapStroke;b.es=b.endStroke;b.dr=b.drawRect;b.rr=b.drawRoundRect;b.rc=b.drawRoundRectComplex;b.dc=
b.drawCircle;b.de=b.drawEllipse;b.dp=b.drawPolyStar;b.p=b.decodePath;b._updateInstructions=function(){this._instructions=this._oldInstructions.slice();this._instructions.push(a.beginCmd);this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions);this._strokeInstructions&&(this._instructions.push.apply(this._instructions,this._strokeInstructions),this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions));this._instructions.push.apply(this._instructions,
this._activeInstructions);this._fillInstructions&&this._instructions.push(a.fillCmd);this._strokeInstructions&&this._instructions.push(a.strokeCmd)};b._newPath=function(){this._dirty&&this._updateInstructions();this._oldInstructions=this._instructions;this._activeInstructions=[];this._active=this._dirty=false};b._setProp=function(b,a){this[b]=a};i.Graphics=a})(window);(function(i){var c=function(){this.initialize()},a=c.prototype;c.suppressCrossDomainErrors=false;c._hitTestCanvas=document.createElement("canvas");c._hitTestCanvas.width=c._hitTestCanvas.height=1;c._hitTestContext=c._hitTestCanvas.getContext("2d");c._nextCacheID=1;a.alpha=1;a.cacheCanvas=null;a.id=-1;a.mouseEnabled=true;a.name=null;a.parent=null;a.regX=0;a.regY=0;a.rotation=0;a.scaleX=1;a.scaleY=1;a.skewX=0;a.skewY=0;a.shadow=null;a.visible=true;a.x=0;a.y=0;a.compositeOperation=null;a.snapToPixel=
false;a.onPress=null;a.onClick=null;a.onDoubleClick=null;a.onMouseOver=null;a.onMouseOut=null;a.onTick=null;a.filters=null;a.cacheID=0;a.mask=null;a.hitArea=null;a._cacheOffsetX=0;a._cacheOffsetY=0;a._cacheDataURLID=0;a._cacheDataURL=null;a._matrix=null;a.initialize=function(){this.id=UID.get();this._matrix=new Matrix2D};a.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0};a.draw=function(b,a){if(a||!this.cacheCanvas)return false;b.drawImage(this.cacheCanvas,this._cacheOffsetX,
this._cacheOffsetY);return true};a.updateContext=function(b){var a,c=this.mask;c&&c.graphics&&(a=c.getMatrix(c._matrix),b.transform(a.a,a.b,a.c,a.d,a.tx,a.ty),c.graphics.drawAsPath(b),b.clip(),a.invert(),b.transform(a.a,a.b,a.c,a.d,a.tx,a.ty));a=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY);Stage._snapToPixelEnabled&&this.snapToPixel?b.transform(a.a,a.b,a.c,a.d,a.tx+0.5|0,a.ty+0.5|0):b.transform(a.a,a.b,a.c,a.d,
a.tx,a.ty);b.globalAlpha*=this.alpha;if(this.compositeOperation)b.globalCompositeOperation=this.compositeOperation;this.shadow&&this._applyShadow(b,this.shadow)};a.cache=function(b,a,h,e){var d=this.cacheCanvas;if(d==null)d=this.cacheCanvas=document.createElement("canvas");var f=d.getContext("2d");d.width=h;d.height=e;f.setTransform(1,0,0,1,-b,-a);f.clearRect(b,a,d.width,d.height);this.draw(f,true,this._matrix.reinitialize(1,0,0,1,-b,-a));this._cacheOffsetX=b;this._cacheOffsetY=a;this._applyFilters();
this.cacheID=c._nextCacheID++};a.updateCache=function(b){var a=this.cacheCanvas,h=this._cacheOffsetX,e=this._cacheOffsetY;if(a==null)throw"cache() must be called before updateCache()";var d=a.getContext("2d");d.setTransform(1,0,0,1,-h,-e);b?d.globalCompositeOperation=b:d.clearRect(h,e,a.width,a.height);this.draw(d,true);if(b)d.globalCompositeOperation="source-over";this._applyFilters();this.cacheID=c._nextCacheID++};a.uncache=function(){this._cacheDataURL=this.cacheCanvas=null;this.cacheID=this._cacheOffsetX=
this._cacheOffsetY=0};a.getCacheDataURL=function(){if(!this.cacheCanvas)return null;if(this.cacheID!=this._cacheDataURLID)this._cacheDataURL=this.cacheCanvas.toDataURL();return this._cacheDataURL};a.getStage=function(){for(var b=this;b.parent;)b=b.parent;return b instanceof Stage?b:null};a.localToGlobal=function(b,a){var c=this.getConcatenatedMatrix(this._matrix);if(c==null)return null;c.append(1,0,0,1,b,a);return new Point(c.tx,c.ty)};a.globalToLocal=function(b,a){var c=this.getConcatenatedMatrix(this._matrix);
if(c==null)return null;c.invert();c.append(1,0,0,1,b,a);return new Point(c.tx,c.ty)};a.localToLocal=function(b,a,c){b=this.localToGlobal(b,a);return c.globalToLocal(b.x,b.y)};a.setTransform=function(b,a,c,e,d,f,g,l,k){this.x=b||0;this.y=a||0;this.scaleX=c==null?1:c;this.scaleY=e==null?1:e;this.rotation=d||0;this.skewX=f||0;this.skewY=g||0;this.regX=l||0;this.regY=k||0};a.getMatrix=function(b){return(b?b.identity():new Matrix).appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,
this.skewY,this.regX,this.regY).appendProperties(this.alpha,this.shadow,this.compositeOperation)};a.getConcatenatedMatrix=function(b){b?b.identity():b=new Matrix2D;for(var a=this;a!=null;)b.prependTransform(a.x,a.y,a.scaleX,a.scaleY,a.rotation,a.skewX,a.skewY,a.regX,a.regY).prependProperties(a.alpha,a.shadow,a.compositeOperation),a=a.parent;return b};a.hitTest=function(b,a){var h=c._hitTestContext,e=c._hitTestCanvas;h.setTransform(1,0,0,1,-b,-a);this.draw(h);h=this._testHit(h);e.width=0;e.width=1;
return h};a.clone=function(){var b=new c;this.cloneProps(b);return b};a.toString=function(){return"[DisplayObject (name="+this.name+")]"};a.cloneProps=function(b){b.alpha=this.alpha;b.name=this.name;b.regX=this.regX;b.regY=this.regY;b.rotation=this.rotation;b.scaleX=this.scaleX;b.scaleY=this.scaleY;b.shadow=this.shadow;b.skewX=this.skewX;b.skewY=this.skewY;b.visible=this.visible;b.x=this.x;b.y=this.y;b.mouseEnabled=this.mouseEnabled;b.compositeOperation=this.compositeOperation;if(this.cacheCanvas)b.cacheCanvas=
this.cacheCanvas.cloneNode(true),b.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0)};a._applyShadow=function(b,a){a=a||Shadow.identity;b.shadowColor=a.color;b.shadowOffsetX=a.offsetX;b.shadowOffsetY=a.offsetY;b.shadowBlur=a.blur};a._tick=function(b){if(this.onTick)this.onTick(b)};a._testHit=function(b){try{var a=b.getImageData(0,0,1,1).data[3]>1}catch(h){if(!c.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.";
}return a};a._applyFilters=function(){if(this.filters&&this.filters.length!=0&&this.cacheCanvas)for(var b=this.filters.length,a=this.cacheCanvas.getContext("2d"),c=this.cacheCanvas.width,e=this.cacheCanvas.height,d=0;d<b;d++)this.filters[d].applyFilter(a,0,0,c,e)};i.DisplayObject=c})(window);(function(i){var c=function(){this.initialize()},a=c.prototype=new DisplayObject;a.children=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(){this.DisplayObject_initialize();this.children=[]};a.isVisible=function(){return this.visible&&this.alpha>0&&this.children.length&&this.scaleX!=0&&this.scaleY!=0};a.DisplayObject_draw=a.draw;a.draw=function(b,a){if(this.DisplayObject_draw(b,a))return true;for(var c=this.children.slice(0),e=0,d=c.length;e<d;e++){var f=c[e];f.isVisible()&&(b.save(),
f.updateContext(b),f.draw(b),b.restore())}return true};a.addChild=function(b){if(b==null)return b;var a=arguments.length;if(a>1){for(var c=0;c<a;c++)this.addChild(arguments[c]);return arguments[a-1]}b.parent&&b.parent.removeChild(b);b.parent=this;this.children.push(b);return b};a.addChildAt=function(b,a){var c=arguments.length,e=arguments[c-1];if(e<0||e>this.children.length)return arguments[c-2];if(c>2){for(var d=0;d<c-1;d++)this.addChildAt(arguments[d],e+d);return arguments[c-2]}b.parent&&b.parent.removeChild(b);
b.parent=this;this.children.splice(a,0,b);return b};a.removeChild=function(b){var a=arguments.length;if(a>1){for(var c=true,e=0;e<a;e++)c=c&&this.removeChild(arguments[e]);return c}return this.removeChildAt(this.children.indexOf(b))};a.removeChildAt=function(b){var a=arguments.length;if(a>1){for(var c=[],e=0;e<a;e++)c[e]=arguments[e];c.sort(function(b,a){return a-b});for(var d=true,e=0;e<a;e++)d=d&&this.removeChildAt(c[e]);return d}if(b<0||b>this.children.length-1)return false;if(a=this.children[b])a.parent=
null;this.children.splice(b,1);return true};a.removeAllChildren=function(){for(var b=this.children;b.length;)b.pop().parent=null};a.getChildAt=function(b){return this.children[b]};a.sortChildren=function(b){this.children.sort(b)};a.getChildIndex=function(b){return this.children.indexOf(b)};a.getNumChildren=function(){return this.children.length};a.swapChildrenAt=function(b,a){var c=this.children,e=c[b],d=c[a];e&&d&&(c[b]=d,c[a]=e)};a.swapChildren=function(b,a){for(var c=this.children,e,d,f=0,g=c.length;f<
g;f++)if(c[f]==b&&(e=f),c[f]==a&&(d=f),e!=null&&d!=null)break;f!=g&&(c[e]=a,c[d]=b)};a.setChildIndex=function(b,a){var c=this.children,e=c.length;if(!(b.parent!=this||a<0||a>=e)){for(var d=0;d<e;d++)if(c[d]==b)break;d==e||d==a||(c.splice(d,1),a<d&&a--,c.splice(a,0,b))}};a.contains=function(b){for(;b;){if(b==this)return true;b=b.parent}return false};a.hitTest=function(b,a){return this.getObjectUnderPoint(b,a)!=null};a.getObjectsUnderPoint=function(b,a){var c=[],e=this.localToGlobal(b,a);this._getObjectsUnderPoint(e.x,
e.y,c);return c};a.getObjectUnderPoint=function(b,a){var c=this.localToGlobal(b,a);return this._getObjectsUnderPoint(c.x,c.y)};a.clone=function(b){var a=new c;this.cloneProps(a);if(b)for(var h=a.children=[],e=0,d=this.children.length;e<d;e++){var f=this.children[e].clone(b);f.parent=a;h.push(f)}return a};a.toString=function(){return"[Container (name="+this.name+")]"};a._tick=function(b){for(var a=this.children.length-1;a>=0;a--){var c=this.children[a];c._tick&&c._tick(b)}if(this.onTick)this.onTick(b)};
a._getObjectsUnderPoint=function(b,a,h,e){var d=DisplayObject._hitTestContext,f=DisplayObject._hitTestCanvas,g=this._matrix,l=e&1&&(this.onPress||this.onClick||this.onDoubleClick)||e&2&&(this.onMouseOver||this.onMouseOut);if(this.cacheCanvas&&l&&(this.getConcatenatedMatrix(g),d.setTransform(g.a,g.b,g.c,g.d,g.tx-b,g.ty-a),d.globalAlpha=g.alpha,this.draw(d),this._testHit(d)))return f.width=0,f.width=1,this;for(var k=this.children.length-1;k>=0;k--){var j=this.children[k];if(j.isVisible()&&j.mouseEnabled)if(j instanceof
c)if(l){if(j=j._getObjectsUnderPoint(b,a))return this}else{if(j=j._getObjectsUnderPoint(b,a,h,e),!h&&j)return j}else if(!e||l||e&1&&(j.onPress||j.onClick||j.onDoubleClick)||e&2&&(j.onMouseOver||j.onMouseOut)){var i=j.hitArea;j.getConcatenatedMatrix(g);i&&(g.appendTransform(i.x+j.regX,i.y+j.regY,i.scaleX,i.scaleY,i.rotation,i.skewX,i.skewY,i.regX,i.regY),g.alpha*=i.alpha/j.alpha);d.globalAlpha=g.alpha;d.setTransform(g.a,g.b,g.c,g.d,g.tx-b,g.ty-a);(i||j).draw(d);if(this._testHit(d))if(f.width=0,f.width=
1,l)return this;else if(h)h.push(j);else return j}}return null};i.Container=c})(window);(function(i){var c=function(b){this.initialize(b)},a=c.prototype=new Container;c._snapToPixelEnabled=false;a.autoClear=true;a.canvas=null;a.mouseX=null;a.mouseY=null;a.onMouseMove=null;a.onMouseUp=null;a.onMouseDown=null;a.snapToPixelEnabled=false;a.mouseInBounds=false;a.tickOnUpdate=true;a._pointerData=null;a._pointerCount=0;a._primaryPointerID=null;a._mouseOverIntervalID=null;a.Container_initialize=a.initialize;a.initialize=function(b){this.Container_initialize();this.canvas=b instanceof HTMLCanvasElement?
b:document.getElementById(b);this._pointerData={};this._enableMouseEvents(true)};a.update=function(b){if(this.canvas)this.autoClear&&this.clear(),c._snapToPixelEnabled=this.snapToPixelEnabled,this.tickOnUpdate&&this._tick(b),this.draw(this.canvas.getContext("2d"),false,this.getConcatenatedMatrix(this._matrix))};a.tick=a.update;a.clear=function(){if(this.canvas){var b=this.canvas.getContext("2d");b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.canvas.width,this.canvas.height)}};a.toDataURL=function(b,
a){a||(a="image/png");var c=this.canvas.getContext("2d"),e=this.canvas.width,d=this.canvas.height,f;if(b){f=c.getImageData(0,0,e,d);var g=c.globalCompositeOperation;c.globalCompositeOperation="destination-over";c.fillStyle=b;c.fillRect(0,0,e,d)}var i=this.canvas.toDataURL(a);if(b)c.clearRect(0,0,e,d),c.putImageData(f,0,0),c.globalCompositeOperation=g;return i};a.enableMouseOver=function(b){if(this._mouseOverIntervalID)clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null;if(b==null)b=
20;else if(b<=0)return;var a=this;this._mouseOverIntervalID=setInterval(function(){a._testMouseOver()},1E3/Math.min(50,b))};a.clone=function(){var b=new c(null);this.cloneProps(b);return b};a.toString=function(){return"[Stage (name="+this.name+")]"};a._enableMouseEvents=function(){var b=this,a=i.addEventListener?i:document;a.addEventListener("mouseup",function(a){b._handleMouseUp(a)},false);a.addEventListener("mousemove",function(a){b._handleMouseMove(a)},false);a.addEventListener("dblclick",function(a){b._handleDoubleClick(a)},
false);this.canvas&&this.canvas.addEventListener("mousedown",function(a){b._handleMouseDown(a)},false)};a._getPointerData=function(b){var a=this._pointerData[b];if(!a&&(a=this._pointerData[b]={},this._primaryPointerID==null))this._primaryPointerID=b;return a};a._handleMouseMove=function(b){if(!b)b=i.event;this._handlePointerMove(-1,b,b.pageX,b.pageY)};a._handlePointerMove=function(b,a,c,e){if(this.canvas){var d=this._getPointerData(b),f=d.inBounds;this._updatePointerPosition(b,c,e);if(f||d.inBounds){b=
new MouseEvent("onMouseMove",d.x,d.y,this,a,b,b==this._primaryPointerID);if(this.onMouseMove)this.onMouseMove(b);if(d.event&&d.event.onMouseMove)d.event.onMouseMove(b)}}};a._updatePointerPosition=function(b,a,c){var e=this.canvas;do a-=e.offsetLeft,c-=e.offsetTop;while(e=e.offsetParent);e=this._getPointerData(b);if(e.inBounds=a>=0&&c>=0&&a<this.canvas.width&&c<this.canvas.height)e.x=a,e.y=c;if(b==this._primaryPointerID)this.mouseX=e.x,this.mouseY=e.y,this.mouseInBounds=e.inBounds};a._handleMouseUp=
function(b){this._handlePointerUp(-1,b,false)};a._handlePointerUp=function(b,a,c){var e=this._getPointerData(b),d=new MouseEvent("onMouseUp",e.x,e.y,this,a,b,b==this._primaryPointerID);if(this.onMouseUp)this.onMouseUp(d);if(e.event&&e.event.onMouseUp)e.event.onMouseUp(d);if(e.target&&e.target.onClick&&this._getObjectsUnderPoint(e.x,e.y,null,true,this._mouseOverIntervalID?3:1)==e.target)e.target.onClick(new MouseEvent("onClick",e.x,e.y,e.target,a,b,b==this._primaryPointerID));if(c){if(b==this._primaryPointerID)this._primaryPointerID=
null;delete this._pointerData[b]}else e.event=e.target=null};a._handleMouseDown=function(b){this._handlePointerDown(-1,b,false)};a._handlePointerDown=function(b,a,c,e){var d=this._getPointerData(b);e!=null&&this._updatePointerPosition(b,c,e);if(this.onMouseDown)this.onMouseDown(new MouseEvent("onMouseDown",d.x,d.y,this,a,b,b==this._primaryPointerID));if(c=this._getObjectsUnderPoint(d.x,d.y,null,this._mouseOverIntervalID?3:1)){if(c.onPress&&(b=new MouseEvent("onPress",d.x,d.y,c,a,b,b==this._primaryPointerID),
c.onPress(b),b.onMouseMove||b.onMouseUp))d.event=b;d.target=c}};a._testMouseOver=function(){if(this._primaryPointerID==-1&&!(this.mouseX==this._mouseOverX&&this.mouseY==this._mouseOverY&&this.mouseInBounds)){var b=null;if(this.mouseInBounds)b=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY;if(this._mouseOverTarget!=b){if(this._mouseOverTarget&&this._mouseOverTarget.onMouseOut)this._mouseOverTarget.onMouseOut(new MouseEvent("onMouseOut",
this.mouseX,this.mouseY,this._mouseOverTarget));if(b&&b.onMouseOver)b.onMouseOver(new MouseEvent("onMouseOver",this.mouseX,this.mouseY,b));this._mouseOverTarget=b}}};a._handleDoubleClick=function(b){if(this.onDoubleClick)this.onDoubleClick(new MouseEvent("onDoubleClick",this.mouseX,this.mouseY,this,b,NaN,true));var a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);if(a&&a.onDoubleClick)a.onDoubleClick(new MouseEvent("onDoubleClick",this.mouseX,this.mouseY,a,
b))};i.Stage=c})(window);(function(i){var c=function(b){this.initialize(b)},a=c.prototype=new DisplayObject;a.image=null;a.snapToPixel=true;a.sourceRect=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b){this.DisplayObject_initialize();typeof b=="string"?(this.image=new Image,this.image.src=b):this.image=b};a.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2)};a.DisplayObject_draw=a.draw;
a.draw=function(b,a){if(this.DisplayObject_draw(b,a))return true;var c=this.sourceRect;c?b.drawImage(this.image,c.x,c.y,c.width,c.height,0,0,c.width,c.height):b.drawImage(this.image,0,0);return true};a.clone=function(){var b=new c(this.image);this.cloneProps(b);return b};a.toString=function(){return"[Bitmap (name="+this.name+")]"};i.Bitmap=c})(window);(function(i){var c=function(b){this.initialize(b)},a=c.prototype=new DisplayObject;a.onAnimationEnd=null;a.currentFrame=-1;a.currentAnimation=null;a.paused=true;a.spriteSheet=null;a.snapToPixel=true;a.offset=0;a.currentAnimationFrame=0;a._advanceCount=0;a._animation=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b){this.DisplayObject_initialize();this.spriteSheet=b};a.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.spriteSheet.complete&&
this.currentFrame>=0};a.DisplayObject_draw=a.draw;a.draw=function(b,a){if(this.DisplayObject_draw(b,a))return true;this._normalizeFrame();var c=this.spriteSheet.getFrame(this.currentFrame);if(c!=null){var e=c.rect;b.drawImage(c.image,e.x,e.y,e.width,e.height,-c.regX,-c.regY,e.width,e.height);return true}};a.play=function(){this.paused=false};a.stop=function(){this.paused=true};a.gotoAndPlay=function(b){this.paused=false;this._goto(b)};a.gotoAndStop=function(b){this.paused=true;this._goto(b)};a.advance=
function(){this._animation?this.currentAnimationFrame++:this.currentFrame++;this._normalizeFrame()};a.clone=function(){var b=new c(this.spriteSheet);this.cloneProps(b);return b};a.toString=function(){return"[BitmapAnimation (name="+this.name+")]"};a._tick=function(b){var a=this._animation?this._animation.frequency:1;!this.paused&&(++this._advanceCount+this.offset)%a==0&&this.advance();if(this.onTick)this.onTick(b)};a._normalizeFrame=function(){var b=this._animation;if(b)if(this.currentAnimationFrame>=
b.frames.length){if(b.next?this._goto(b.next):(this.paused=true,this.currentAnimationFrame=b.frames.length-1,this.currentFrame=b.frames[this.currentAnimationFrame]),this.onAnimationEnd)this.onAnimationEnd(this,b.name)}else this.currentFrame=b.frames[this.currentAnimationFrame];else if(this.currentFrame>=this.spriteSheet.getNumFrames()&&(this.currentFrame=0,this.onAnimationEnd))this.onAnimationEnd(this,null)};a.DisplayObject_cloneProps=a.cloneProps;a.cloneProps=function(b){this.DisplayObject_cloneProps(b);
b.onAnimationEnd=this.onAnimationEnd;b.currentFrame=this.currentFrame;b.currentAnimation=this.currentAnimation;b.paused=this.paused;b.offset=this.offset;b._animation=this._animation;b.currentAnimationFrame=this.currentAnimationFrame};a._goto=function(b){if(isNaN(b)){var a=this.spriteSheet.getAnimation(b);if(a)this.currentAnimationFrame=0,this._animation=a,this.currentAnimation=b,this._normalizeFrame()}else this.currentAnimation=this._animation=null,this.currentFrame=b};i.BitmapAnimation=c})(window);(function(i){var c=function(b){this.initialize(b)},a=c.prototype=new DisplayObject;a.graphics=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b){this.DisplayObject_initialize();this.graphics=b?b:new Graphics};a.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.graphics};a.DisplayObject_draw=a.draw;a.draw=function(b,a){if(this.DisplayObject_draw(b,a))return true;this.graphics.draw(b);return true};a.clone=function(b){b=new c(b&&this.graphics?
this.graphics.clone():this.graphics);this.cloneProps(b);return b};a.toString=function(){return"[Shape (name="+this.name+")]"};i.Shape=c})(window);(function(i){var c=function(b,a,c){this.initialize(b,a,c)},a=c.prototype=new DisplayObject;c._workingContext=document.createElement("canvas").getContext("2d");a.text="";a.font=null;a.color=null;a.textAlign=null;a.textBaseline=null;a.maxWidth=null;a.outline=false;a.lineHeight=0;a.lineWidth=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b,a,c){this.DisplayObject_initialize();this.text=b;this.font=a;this.color=c?c:"#000"};a.isVisible=function(){return Boolean(this.visible&&this.alpha>
0&&this.scaleX!=0&&this.scaleY!=0&&this.text!=null&&this.text!=="")};a.DisplayObject_draw=a.draw;a.draw=function(b,a){if(this.DisplayObject_draw(b,a))return true;this.outline?b.strokeStyle=this.color:b.fillStyle=this.color;b.font=this.font;b.textAlign=this.textAlign||"start";b.textBaseline=this.textBaseline||"alphabetic";this._drawText(b);return true};a.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width};a.getMeasuredLineHeight=function(){return this._getWorkingContext().measureText("M").width*
1.2};a.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())};a.clone=function(){var b=new c(this.text,this.font,this.color);this.cloneProps(b);return b};a.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"};a.DisplayObject_cloneProps=a.cloneProps;a.cloneProps=function(b){this.DisplayObject_cloneProps(b);b.textAlign=this.textAlign;b.textBaseline=this.textBaseline;b.maxWidth=this.maxWidth;b.outline=
this.outline;b.lineHeight=this.lineHeight;b.lineWidth=this.lineWidth};a._getWorkingContext=function(){var b=c._workingContext;b.font=this.font;b.textAlign=this.textAlign||"start";b.textBaseline=this.textBaseline||"alphabetic";return b};a._drawText=function(b){var a=!!b;a||(b=this._getWorkingContext());for(var c=String(this.text).split(/(?:\r\n|\r|\n)/),e=this.lineHeight||this.getMeasuredLineHeight(),d=0,f=0,g=c.length;f<g;f++){var i=b.measureText(c[f]).width;if(this.lineWidth==null||i<this.lineWidth)a&&
this._drawTextLine(b,c[f],d*e);else{for(var i=c[f].split(/(\s)/),k=i[0],j=1,o=i.length;j<o;j+=2)b.measureText(k+i[j]+i[j+1]).width>this.lineWidth?(a&&this._drawTextLine(b,k,d*e),d++,k=i[j+1]):k+=i[j]+i[j+1];a&&this._drawTextLine(b,k,d*e)}d++}return d};a._drawTextLine=function(b,a,c){this.outline?b.strokeText(a,0,c,this.maxWidth||65535):b.fillText(a,0,c,this.maxWidth||65535)};i.Text=c})(window);(function(i){var c=function(){throw"SpriteSheetUtils cannot be instantiated";};c._workingCanvas=document.createElement("canvas");c._workingContext=c._workingCanvas.getContext("2d");c.addFlippedFrames=function(a,b,m,h){if(b||m||h){var e=0;b&&c._flip(a,++e,true,false);m&&c._flip(a,++e,false,true);h&&c._flip(a,++e,true,true)}};c.extractFrame=function(a,b){isNaN(b)&&(b=a.getAnimation(b).frames[0]);var m=a.getFrame(b);if(!m)return null;var h=m.rect,e=c._workingCanvas;e.width=h.width;e.height=h.height;
c._workingContext.drawImage(m.image,h.x,h.y,h.width,h.height,0,0,h.width,h.height);m=new Image;m.src=e.toDataURL("image/png");return m};c._flip=function(a,b,m,h){for(var e=a._images,d=c._workingCanvas,f=c._workingContext,g=e.length/b,i=0;i<g;i++){var k=e[i];k.__tmp=i;d.width=k.width;d.height=k.height;f.setTransform(m?-1:1,0,0,h?-1:1,m?k.width:0,h?k.height:0);f.drawImage(k,0,0);var j=new Image;j.src=d.toDataURL("image/png");j.width=k.width;j.height=k.height;e.push(j)}f=a._frames;d=f.length/b;for(i=
0;i<d;i++){var k=f[i],o=k.rect.clone(),j=e[k.image.__tmp+g*b],n={image:j,rect:o,regX:k.regX,regY:k.regY};if(m)o.x=j.width-o.x-o.width,n.regX=o.width-k.regX;if(h)o.y=j.height-o.y-o.height,n.regY=o.height-k.regY;f.push(n)}m="_"+(m?"h":"")+(h?"v":"");h=a._animations;a=a._data;e=h.length/b;for(i=0;i<e;i++){f=h[i];k=a[f];g={name:f+m,frequency:k.frequency,next:k.next,frames:[]};k.next&&(g.next+=m);f=k.frames;k=0;for(j=f.length;k<j;k++)g.frames.push(f[k]+d*b);a[g.name]=g;h.push(g.name)}};i.SpriteSheetUtils=
c})(window);(function(i){var c=function(){this.initialize()},a=c.prototype;c.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions";c.ERR_RUNNING="a build is already running";a.maxWidth=2048;a.maxHeight=2048;a.spriteSheet=null;a.scale=1;a._frames=null;a._animations=null;a._data=null;a._nextFrameIndex=0;a._index=0;a._callback=null;a._timeSlice=null;a._timerID=null;a._scale=1;a.initialize=function(){this._frames=[];this._animations={}};a.addFrame=function(b,a,h,e,d,f){if(this._data)throw c.ERR_RUNNING;
a=a||b.bounds||b.nominalBounds;!a&&b.getBounds&&(a=b.getBounds());if(!a)return null;h=h||1;return this._frames.push({source:b,sourceRect:a,scale:h,funct:e,params:d,scope:f,index:this._frames.length,height:a.height*h})-1};a.addAnimation=function(b,a,h,e){if(this._data)throw c.ERR_RUNNING;this._animations[b]={frames:a,next:h,frequency:e}};a.addMovieClip=function(b,a,h){if(this._data)throw c.ERR_RUNNING;var e=b.frameBounds,a=a||b.bounds||b.nominalBounds;!a&&b.getBounds&&(a=b.getBounds());if(!a&&!e)return null;
for(var d=b.timeline.duration,f=0;f<d;f++)this.addFrame(b,e&&e[f]?e[f]:a,h,function(b){var a=this.actionsEnabled;this.actionsEnabled=false;this.gotoAndStop(b);this.actionsEnabled=a},[f],b);var b=b.timeline._labels,g;for(g in b)this.addAnimation(g,b[g],true)};a.build=function(){if(this._data)throw c.ERR_RUNNING;this._callback=null;for(this._startBuild();this._drawNext(););this._endBuild();return this.spriteSheet};a.buildAsync=function(b,a){if(this._data)throw c.ERR_RUNNING;this._callback=b;this._startBuild();
this._timeSlice=Math.max(0.01,Math.min(0.99,a||0.3))*50;var h=this;this._timerID=setTimeout(function(){h._run()},50-this._timeSlice)};a.stopAsync=function(){clearTimeout(this._timerID);this._data=null};a.clone=function(){throw"SpriteSheet cannot be cloned.";};a.toString=function(){return"[SpriteSheetBuilder]"};a._startBuild=function(){this.spriteSheet=null;this._index=0;this._scale=this.scale;var b=[];this._data={images:[],frames:b,animations:this._animations};var a=this._frames.slice();a.sort(function(b,
a){return b.height<=a.height?-1:1});if(a[a.length-1].height>this.maxHeight)throw c.ERR_DIMENSIONS;for(var h=1,e=1,d=0;a.length;){var f=this._fillRow(a,h,d,b);if(f.w>e)e=f.w;h+=f.h+2;if(!f.h||!a.length){var g=document.createElement("canvas");g.width=this._getSize(e,this.maxWidth);g.height=this._getSize(h,this.maxHeight);this._data.images[d]=g;f.h||(e=h=1,d++)}}};a._getSize=function(b,a){for(var c=4;Math.pow(2,++c)<b;);return Math.min(a,Math.pow(2,c))};a._fillRow=function(b,a,h,e){for(var d=this.maxWidth,
f=this.maxHeight-a,g=1,i=0,k=b.length-1;k>=0;k--){var j=b[k],o=this._scale*j.scale,n=j.sourceRect,r=j.source,s=Math.floor(o*n.x-1),p=Math.floor(o*n.y-1),q=Math.ceil(o*n.height),n=Math.ceil(o*n.width);if(n>d)throw c.ERR_DIMENSIONS;if(!(q>f||g+n>d))j.img=h,j.rect=new Rectangle(g,a,n,q),i=i||q,b.splice(k,1),e[j.index]=[g-1,a-1,n+2,q+2,h,Math.round(-s+o*r.regX),Math.round(-p+o*r.regY)],g+=n+2}return{w:g,h:i}};a._endBuild=function(){this.spriteSheet=new SpriteSheet(this._data);this._data=null;this._callback&&
this._callback(this)};a._run=function(){for(var b=(new Date).getTime()+this._timeSlice,a=false;b>(new Date).getTime();)if(!this._drawNext()){a=true;break}if(a)this._endBuild();else{var c=this;this._timerID=setTimeout(function(){c._run()},50-this._timeSlice)}};a._drawNext=function(){var a=this._frames[this._index],c=a.scale*this._scale,h=a.rect,e=a.sourceRect,d=this._data.images[a.img].getContext("2d");a.funct&&a.funct.apply(a.scope,a.params);d.save();d.beginPath();d.rect(h.x-1,h.y-1,h.width+2,h.height+
2);d.clip();d.translate(h.x-e.x*c+0.5|0,h.y-e.y*c+0.5|0);d.scale(c,c);a.source.draw(d);d.restore();return++this._index<this._frames.length};i.SpriteSheetBuilder=c})(window);(function(i){var c=function(a){this.initialize(a)},a=c.prototype=new DisplayObject;a.htmlElement=null;a._style=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(a){typeof a=="string"&&(a=document.getElementById(a));this.DisplayObject_initialize();this.mouseEnabled=false;if(this.htmlElement=a)this._style=a.style,this._style.position="absolute",this._style.transformOrigin=this._style.webkitTransformOrigin=this._style.msTransformOrigin=this._style.MozTransformOrigin="0% 0%"};a.isVisible=
function(){return this.htmlElement!=null};a.draw=function(){if(this.htmlElement!=null){var a=this.getConcatenatedMatrix(this._matrix),c=this.htmlElement;c.style.opacity=""+a.alpha;c.style.visibility=this.visible?"visible":"hidden";c.style.transform=c.style.webkitTransform=c.style.oTransform=c.style.msTransform=["matrix("+a.a,a.b,a.c,a.d,a.tx,a.ty+")"].join(",");c.style.MozTransform=["matrix("+a.a,a.b,a.c,a.d,a.tx+"px",a.ty+"px)"].join(",");return true}};a.cache=function(){};a.uncache=function(){};
a.updateCache=function(){};a.hitTest=function(){};a.localToGlobal=function(){};a.globalToLocal=function(){};a.localToLocal=function(){};a.clone=function(){var a=new c;this.cloneProps(a);return a};a.toString=function(){return"[DOMElement (name="+this.name+")]"};a._tick=function(a){if(this.htmlElement!=null&&(this.htmlElement.style.visibility="hidden",this.onTick))this.onTick(a)};i.DOMElement=c})(window);(function(i){var c=function(){this.initialize()},a=c.prototype;a.initialize=function(){};a.getBounds=function(){return new Rectangle(0,0,0,0)};a.applyFilter=function(){};a.toString=function(){return"[Filter]"};a.clone=function(){return new c};i.Filter=c})(window);(function(i){var c=function(){throw"Touch cannot be instantiated";};c.isSupported=function(){return"ontouchstart"in i||i.navigator.msPointerEnabled};c.enable=function(a,b,m){if(!a||!a.canvas||!c.isSupported())return false;a.__touch={pointers:{},multitouch:!b,preventDefault:!m,count:0};"ontouchstart"in i?c._IOS_enable(a):i.navigator.msPointerEnabled&&c._IE_enable(a);return true};c._IOS_enable=function(a){var b=a.canvas;b.addEventListener("touchstart",function(b){c._IOS_handleEvent(a,b)},false);b.addEventListener("touchmove",
function(b){c._IOS_handleEvent(a,b)},false);b.addEventListener("touchend",function(b){c._IOS_handleEvent(a,b)},false);b.addEventListener("touchcancel",function(b){c._IOS_handleEvent(a,b)},false)};c._IOS_handleEvent=function(a,b){a.__touch.preventDefault&&b.preventDefault&&b.preventDefault();for(var c=b.changedTouches,h=b.type,e=0,d=c.length;e<d;e++){var f=c[e],g=f.identifier;f.target==a.canvas&&(h=="touchstart"?this._handleStart(a,g,b,f.pageX,f.pageY):h=="touchmove"?this._handleMove(a,g,b,f.pageX,
f.pageY):(h=="touchend"||h=="touchcancel")&&this._handleEnd(a,g,b))}};c._IE_enable=function(a){var b=a.canvas;b.addEventListener("MSPointerDown",function(b){c._IE_handleEvent(a,b)},false);b.addEventListener("MSPointerMove",function(b){c._IE_handleEvent(a,b)},false);b.addEventListener("MSPointerUp",function(b){c._IE_handleEvent(a,b)},false);b.addEventListener("MSPointerCancel",function(b){c._IE_handleEvent(a,b)},false);if(a.__touch.preventDefault)b.style.msContentZooming=b.style.msTouchAction="none"};
c._IE_handleEvent=function(a,b){a.__touch.preventDefault&&(b.preventDefault&&b.preventDefault(),b.preventManipulation&&b.preventManipulation());var c=b.type,h=b.pointerId;b.srcElement==a.canvas&&(c=="MSPointerDown"?this._handleStart(a,h,b,b.pageX,b.pageY):c=="MSPointerMove"?this._handleMove(a,h,b,b.pageX,b.pageY):(c=="MSPointerUp"||c=="MSPointerCancel")&&this._handleEnd(a,h,b))};c._handleStart=function(a,b,c,h,e){var d=a.__touch;if(d.multitouch||!d.count){var f=d.pointers;f[b]||(f[b]=true,d.count++,
a._handlePointerDown(b,c,h,e))}};c._handleMove=function(a,b,c,h,e){a.__touch.pointers[b]&&a._handlePointerMove(b,c,h,e)};c._handleEnd=function(a,b,c){var h=a.__touch,e=h.pointers;e[b]&&(h.count--,a._handlePointerUp(b,c,true),delete e[b])};i.Touch=c})(window);
